---
title: WSL2 + BlueStacks 5 앱 진단 환경 구성
desc: WSL과 호환되지 않는  nox 대신 bluestack을 통해 진단 환경 구성
date: 2025-12-09
thumbnail: /posts/etc/mongodb/thumbnail.png
---


기존에 Nox를 사용하면 WSL를 동시에 사용하지 못해 Bluestack 5를 이용해 WSL2 + Bluestack 5 환경에서 앱 진단 환경을 구성하는 방법에 대해 설명하겠습니다.
WSL과 Nox로 인해 고생하고 계시는 분들에게 도움이 되었으면 합니다.

---

## 사전 준비
- **[Bluestack 5](https://www.bluestacks.com/)**
- **[Kitsune Mask APK](https://github.com/1q23lyc45/KitsuneMagisk/releases)**
- **[BurpSuite](https://portswigger.net/burp/communitydownload)**

---
## 1. Bluestack conf 수정
**C:\ProgramData\BlueStacks_nxt** 폴더의 **bluestack.conf** 파일을 열어 아래 설정 항목을 0에서 1로 수정 후 저장한다.
```note
bst.feature.rooting="0" -> bst.feature.rooting="1"
bst.instance.Pie64.enable_root_access="0" -> bst.instance.Pie64.enable_root_access="1"
```

---
## 2. Enable R/W
**C:\ProgramData\BlueStacks_nxt\Engine\Pie64** 폴더의 **Android.bstk.in, Pie64.bstk** 파일을 열어 아래와 항목의 **Readonly**를 **Normal**로 수정한다.
```xml
<HardDisk uuid="{...}" location="fastboot.vdi" format="VDI" type="Readonly" />
<HardDisk uuid="{...}" location="Root.vhd" format="VHD" type="Readonly"/>

<HardDisk uuid="{...}" location="fastboot.vdi" format="VDI" type="Normal" />
<HardDisk uuid="{...}" location="Root.vhd" format="VHD" type="Normal"/>
```

> Android.bstk.in, Pie64.bstk 각각의 파일을 모두 수정해야 된다.

---
## 3. Kitsune Mask APK설치
**[Kitsune Mask APK](https://github.com/1q23lyc45/KitsuneMagisk/releases)** 를 Bluestack에 설치한다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209124750.png)

Kitsune Mask 앱 실행 후 아래와 같이 진행하여 루팅하여 준다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209125327.png)

![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209125403.png)

![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209125342.png)

정상적으로 마무리 되면 **Bluestack을 종료한다.**

---
## 4. Bluestack conf 수정 및 SU shell 활성화
1단계에서 진행했던 **C:\ProgramData\BlueStacks_nxt** 폴더의 **bluestack.conf** 파일을 기존 설정대로 변경하고 Bluestack을 실행하여 준다.
```note
bst.feature.rooting="1" -> bst.feature.rooting="0"
bst.instance.Pie64.enable_root_access="1" -> bst.instance.Pie64.enable_root_access="0"
```
  
앱을 실행 후 앱 설치를 통해 앱을 설치하여 준다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209130435.png)

이후 슈퍼유저 메뉴로 들어가 [SharedUID] 셸 항목을 활정화 시켜준다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209130546.png)

---
## 5. ADB 활성화 및 루팅 여부 확인
Bluestack 설정에서 Android 디버그 브리지(ADB)를 활성화 한다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209130023.png)

adb를 통해 root 셸에 정상적으로 접근되는지 확인한다.
```note
PS C:\Users\USER> adb shell
taimen:/ $ whoami
shell
taimen:/ $ su
taimen:/ # whoami
root
```

---
## 6. BurpSuite 인증서 설치
우선 Burpsuite를 실행하여 인증서를 받는다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209133300.png)

추출한 der 파일을 openssl을 이용해 pem 파일로 변형해준다.
```note
openssl x509 -inform DER -in burp.der -out burp.pem
openssl x509 -inform PEM -subject_hash_old -in burp.pem | head -1
9a5ba575
mv burp.pem 9a5ba575.0
```

adb push를 통해 pem 파일을 업로드 후 system 인증서 위치에 pem 파일을 옮겨준다.
```note
adb push 9a5ba575.0 /sdcard
9a5ba575.0: 1 file pushed, 0 skipped. 5.8 MB/s (1330 bytes in 0.000s)
adb shell
taimen:/ $ su
taimen:/ # mount -o rw,remount /system
taimen:/ # mv /sdcard/9a5ba575.0 /system/etc/security/cacerts
taimen:/ # chmod 644 /system/etc/security/cacerts/9a5ba575.0
taimen:/ # chown system:system /system/etc/security/cacerts/9a5ba575.0
```

Bluestack을 재실행해준다.

---
## 7. Bluestack Proxy 설정
Bluestack은 Proxy 설정을 막아놓았기 때문에 일반적인 방식이 아닌 다른 방식을 통해 Proxy 설정을 해야된다.


여러 방법이 존재하지만 가장 간단한 방법을 통해 진행하는 방법을 설명하겠다.


현재 내 아이피로 adb 명령어를 입력해주면 된다.
```note
ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255
        ether 14:4f:8a:16:65:25  txqueuelen 1000  (Ethernet)
        RX packets 1504  bytes 2353039 (2.2 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 652  bytes 52090 (50.8 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        
adb shell settings put global http_proxy 192.168.1.10:8888
```

비활성화 시 아래 명령어 입력
```note
adb shell settings put global http_proxy :0
```

WSL2 + Bluestack 5를 같이 사용할 수 있게 된다.
![](/posts/etc/wsl2-bluestacks-pentest-setup/20251209144322.png)