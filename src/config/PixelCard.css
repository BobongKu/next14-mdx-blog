:root {
  /* 기본 변수들. */
  --space: 1rem;
  --ease-out: cubic-bezier(0.5, 1, 0.89, 1);
  --ease-in-out: cubic-bezier(0.45, 0, 0.55, 1);

  /* --- [추가] 라이트 모드 변수 --- */
  --light-fg: #000; /* 검은색 텍스트 */
  --light-surface-2: #e5e7eb; /* tailwind gray-200 (테두리) */
  --light-surface-shadow: #f0f0f0; /* ::before 그림자 */
  --light-bg: #ffffff; /* 흰색 배경 */
  --light-footer-text: #6B7280; /* text-gray-500 */
  /* 선택 상태에서 픽셀 캔버스를 반전시킬지 여부 (1 = invert, 0 = no invert)
     기본: 라이트 모드에서 반전(대비를 위해), 다크 모드에서는 비반전 */
  --selected-invert: 1;
}

.dark {
  /* --- [추가] 다크 모드 변수 정의 --- */
  --bg: #09090b;
  --fg: #e3e3e3;
  --surface-1: #101012;
  --surface-2: #27272a;
  --surface-3: #52525b;
  --dark-footer-text: #9CA3AF; /* text-gray-400 */
  /* 다크 모드에서는 선택 시 반전을 끔 (이미 다크에 맞는 색상) */
  --selected-invert: 0;
}

/* --- [수정] 기본 스타일을 라이트 모드로 변경 --- */
.card {
  position: relative;
  overflow: hidden;
  display: grid;
  grid-template-areas: "card";
  place-items: center;
  min-height: 150px; /* PostCard를 위한 기본 높이 */
  height: 100%;
  border: 1px solid var(--light-surface-2);
  isolation: isolate;
  transition: border-color 200ms var(--ease-out), box-shadow 800ms var(--ease-in-out);
  user-select: none;
  border-radius: 0.375rem;
  /* [수정] background-color를 rgb(a)로 변경하고 backdrop-filter 추가 */
  background-color: rgb(255 255 255 / 0.3);
  backdrop-filter: blur(4px);
}

/* --- [수정] 다크 모드 스타일을 .dark로 래핑 --- */
.dark .card {
  border-color: var(--surface-2);
  /* [수정] background-color를 rgb(a)로 변경 (var(--bg)가 #09090b) */
  background-color: rgb(9 9 11 / 0.2);
}

/* [수정] .card::before, .card::after 관련 규칙 모두 삭제 (흰색/검은색 내부 채우기 효과 제거) 
*/

.card > * {
  grid-area: card;
}

/* 픽셀 캔버스는 맨 뒤(z-index 1)에 배치 */
.card > pixel-canvas {
  position: relative;
  z-index: 1;
  width: 100%;
  height: 100%;
}

/* SVG 아이콘 대신, PostCard의 콘텐츠(z-index 3)를 배치 */
.card-content {
  position: relative;
  z-index: 3;
  width: 100%;
  height: 100%;
  /* 기존 PostCard의 패딩과 flex 구조를 여기에 적용 */
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 0.25rem 1rem 1rem 1rem; /* p-4 pt-1 */
  color: var(--light-fg); /* 라이트 모드 텍스트 */
}

/* 다크 모드 .card-content */
.dark .card-content {
  color: var(--fg);
}

/* 기존 PostCard의 하단 정보 */
.card-footer {
  display: flex;
  justify-content: space-between;
  gap: 0.75rem;
  font-size: 0.875rem;
}

.card-footer .icon-text {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}


/* 호버 및 포커스 효과 */
.card:focus-within {
  outline: 5px auto Highlight;
  outline: 5px auto -webkit-focus-ring-color;
}

/* 카드 호버 효과 통합 */
.card:where(:hover, :focus-within),
.category-pixel-card:where(:hover, :focus-within) {
  border-color: var(--active-color, var(--light-fg));
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

/* 다크 모드 호버 */
.dark .card:where(:hover, :focus-within),
.dark .category-pixel-card:where(:hover, :focus-within) {
  border-color: var(--active-color, var(--fg));
}


/* PostCard 텍스트 색상 */
.card .card-title,
.card-content > div:first-child > div:first-child, /* 카테고리 */
.card-footer /* 날짜/시간 */ {
  color: var(--light-fg); 
  transition: color 300ms var(--ease-out);
}

/* PostCard 텍스트 색상 (Dark) */
.dark .card .card-title,
.dark .card-content > div:first-child > div:first-child, 
.dark .card-footer {
  color: var(--fg);
}

/* PostCard 텍스트 호버 색상 */
.card:where(:hover, :focus-within) .card-title,
.card:where(:hover, :focus-within) .card-content > div:first-child > div:first-child, 
.card:where(:hover, :focus-within) .card-footer {
  color: var(--light-fg); /* 라이트 모드 호버 시 색상 고정 */
  transition: color 300ms var(--ease-in-out);
}

/* PostCard 텍스트 호버 색상 (Dark) */
.dark .card:where(:hover, :focus-within) .card-title,
.dark .card:where(:hover, :focus-within) .card-content > div:first-child > div:first-child,
.dark .card:where(:hover, :focus-within) .card-footer {
  color: var(--active-color, var(--fg)); /* 다크 모드는 --active-color 유지 */
}

/* [수정] .card:where(:hover...)::before, ::after 관련 규칙 모두 삭제 
*/

.category-pixel-card {
  position: relative;
  overflow: hidden;
  border: 1px solid var(--light-surface-2);
  isolation: isolate;
  transition: border-color 200ms var(--ease-out), box-shadow 800ms var(--ease-in-out);
  user-select: none;
}

/* 'ghost' variant (not current)일 때만 기본 배경색 적용 */
.category-pixel-card:not(.bg-primary) {
  /* background-color를 rgb(a)로 변경하고 backdrop-filter 추가 */
  background-color: rgb(255 255 255 / 0.3);
  backdrop-filter: blur(4px);
}
.dark .category-pixel-card:not(.bg-primary) {
  /* background-color를 rgb(a)로 변경 (var(--bg)가 #09090b) */
  background-color: rgb(9 9 11 / 0.2);
}

/* [수정] .category-pixel-card::before, .category-pixel-card::after 관련 규칙 모두 삭제 (흰색/검은색 내부 채우기 효과 제거) 
*/


/* --- CategoryButton 호버 효과 --- */

/* 호버 시 테두리 색상 변경 */
.category-pixel-card:where(:hover, :focus-within) {
  border-color: var(--active-color, var(--light-fg));
  transition: border-color 800ms var(--ease-in-out);
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

.dark .category-pixel-card:where(:hover, :focus-within) {
  border-color: var(--active-color, var(--fg));
}

/* [수정] .category-pixel-card:where(:hover...)::before, ::after 관련 규칙 모두 삭제 
*/

/* 1. 'ghost' 버튼 (isCurrent=false) 텍스트 기본 색상 */
/* (a.category-pixel-card > span.z-30) */
.category-pixel-card > span.z-30 {
  color: var(--light-fg);
  transition: color 300ms var(--ease-out);
}
.dark .category-pixel-card > span.z-30 {
  color: var(--fg);
}

/* 2. 카드 호버 시 'ghost' 버튼 텍스트 색상 변경 */
.category-pixel-card:where(:hover, :focus-within) > span.z-30 {
  color: var(--light-fg); /* 라이트 모드 호버 시 색상 고정 */
  transition: color 300ms var(--ease-in-out);
}
.dark .category-pixel-card:where(:hover, :focus-within) > span.z-30 {
  color: var(--active-color, var(--fg)); /* 다크 모드는 --active-color 유지 */
}

/* 3. 'default' 버튼(isCurrent=true) 텍스트 색상 유지 (Tailwind .text-primary-foreground) */
.category-pixel-card.text-primary-foreground > span.z-30 {
  color: hsl(var(--primary-foreground));
}
.dark .category-pixel-card.text-primary-foreground > span.z-30 {
  color: hsl(var(--primary-foreground));
}
.category-pixel-card.text-primary-foreground:where(:hover, :focus-within) > span.z-30 {
  color: hsl(var(--primary-foreground));
}
.dark .category-pixel-card.text-primary-foreground:where(:hover, :focus-within) > span.z-30 {
  color: hsl(var(--primary-foreground));
}

/* --- [수정] 선택된 카테고리 버튼 (isCurrent=true) 시각화 --- */
/* CategoryButton.tsx에서 isCurrent=true일 때 이 클래스를 추가함 */
.current-category-glow {
  border-color: var(--active-color);
  box-shadow: 0 0 10px 1px var(--active-color);
}

/* 다크 모드에서도 동일하게 적용 */
.dark .current-category-glow {
  border-color: var(--active-color);
  box-shadow: 0 0 10px 1px var(--active-color);
}